const TelegramBot = require('node-telegram-bot-api');
const express = require('express');

const app = express();
const port = process.env.PORT || 3000;

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–æ–∫–µ–Ω–∞
const token = process.env.BOT_TOKEN || '8233531510:AAFE9hne6Kpir2yDxHuizwAm3XMUIm9IPnM';
const bot = new TelegramBot(token, { polling: true });

// === –í–°–¢–ê–í–¨ –°–Æ–î–ê –í–ï–°–¨ –ö–û–î –ë–û–¢–ê –ò–ó –ù–ê–®–ï–ì–û –ü–†–ï–î–´–î–£–©–ï–ì–û –°–û–û–ë–©–ï–ù–ò–Ø ===
// –ù–∞—á–∏–Ω–∞—è —Å:
// –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
const userData = new Map();

// Emoji –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
const moodEmojis = {
  1: 'üò¢', // –û—á–µ–Ω—å –ø–ª–æ—Ö–æ
  2: 'üòî', // –ü–ª–æ—Ö–æ
  3: 'üòê', // –ù–æ—Ä–º–∞–ª—å–Ω–æ
  4: 'üòä', // –•–æ—Ä–æ—à–æ
  5: 'üòç'  // –û—Ç–ª–∏—á–Ω–æ
};

// –ë–û–õ–¨–®–ê–Ø –ë–ê–ó–ê –ú–û–¢–ò–í–ê–¶–ò–û–ù–ù–´–• –§–†–ê–ó (70+ —Ñ—Ä–∞–∑)
const motivationalPhrases = {
  1: [ // –î–ª—è –ø–ª–æ—Ö–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (25 —Ñ—Ä–∞–∑)
    "–¢—è–∂–µ–ª—ã–µ –¥–Ω–∏ –∑–∞–∫–∞–ª—è—é—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä. –¢—ã —Å–∏–ª—å–Ω–µ–µ, —á–µ–º –¥—É–º–∞–µ—à—å üí™",
    "–û–±–ª–∞–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞—Å—Å–µ–∏–≤–∞—é—Ç—Å—è, –¥–∞–∂–µ —Å–∞–º—ã–µ —Ç–µ–º–Ω—ã–µ. –°–∫–æ–≥–¥–∞ –∏ —Ç–≤–æ–∏ ‚òÅÔ∏è‚û°Ô∏èüå§Ô∏è",
    "–ü–æ–∑–≤–æ–ª—å —Å–µ–±–µ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å. –≠—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ —Å–∏–ª—ã, –∞ –Ω–µ —Å–ª–∞–±–æ—Å—Ç–∏ üíô",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∂–¥–∞—Ç—å –±—É—Ä—é. –Ø —Ä—è–¥–æ–º üåßÔ∏è",
    "–¢—ã —É–∂–µ –ø–µ—Ä–µ–∂–∏–ª —Å—Ç–æ–ª—å–∫–æ —Ç—Ä—É–¥–Ω—ã—Ö –¥–Ω–µ–π - –∏ —ç—Ç–æ—Ç —Ç–æ–∂–µ –ø—Ä–æ–π–¥–µ—Ç üìÖ",
    "–ó–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ - —ç—Ç–æ –Ω–µ —Ä–æ—Å–∫–æ—à—å, –∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å. –ß—Ç–æ –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Å–µ–±—è —Å–µ–≥–æ–¥–Ω—è? üõÅ",
    "–î–∞–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ –≤–ø–µ—Ä–µ–¥ - —ç—Ç–æ –ø—Ä–æ–≥—Ä–µ—Å—Å. –ì–æ—Ä–¥–∏—Å—å —Å–æ–±–æ–π üë£",
    "–¢–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –≤–∞–∂–Ω—ã –∏ valid. –ü—Ä–∏–Ω–∏–º–∞–π –∏—Ö –±–µ–∑ –æ—Å—É–∂–¥–µ–Ω–∏—è ü´Ç",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º —É—Å–∫–æ—Ä–∏—Ç—å—Å—è. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ üê¢",
    "–¢—ã –Ω–µ –æ–¥–∏–Ω–æ–∫ –≤ —Å–≤–æ–∏—Ö –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è—Ö. –ú–Ω–æ–≥–∏–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –ø–æ–¥–æ–±–Ω–æ–µ üë•",
    "–ó–∞–≤—Ç—Ä–∞ - –Ω–æ–≤—ã–π –¥–µ–Ω—å —Å –Ω–æ–≤—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏. –î–∞–π —Å–µ–±–µ —à–∞–Ω—Å üåÖ",
    "–°–∏–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ–±—ã –ø—Ä–∏–∑–Ω–∞—Ç—å: —Å–µ–≥–æ–¥–Ω—è —Ç—è–∂–µ–ª–æ. –ò —ç—Ç–æ –æ–∫–µ–π üõ°Ô∏è",
    "–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ä–∞–¥–æ—Å—Ç–∏ —Å–ø–∞—Å–∞—é—Ç –≤ —Ç—Ä—É–¥–Ω—ã–µ –¥–Ω–∏. –ù–∞–π–¥–∏ —Å–≤–æ—é —Å–µ–≥–æ–¥–Ω—è üç´",
    "–î—ã—à–∏ –≥–ª—É–±–∂–µ. –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è. –û–¥–∏–Ω –≤–¥–æ—Ö –∑–∞ —Ä–∞–∑ üå¨Ô∏è",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å. –í—Å–µ–ª–µ–Ω–Ω–∞—è –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç üåå",
    "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å –¥–æ–±—Ä–æ—Ç—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Ç —Å–∞–º–æ–≥–æ —Å–µ–±—è üíù",
    "–ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ –ª–∏–Ω–µ–π–Ω—ã–π. –û—Ç–∫–∞—Ç—ã –Ω–∞–∑–∞–¥ - —ç—Ç–æ —á–∞—Å—Ç—å –ø—É—Ç–∏ üîÑ",
    "–°–µ–≥–æ–¥–Ω—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂–µ–ª–æ, –Ω–æ —Ç—ã —É–∂–µ –¥–µ–ª–∞–µ—à—å –≤–∞–∂–Ω–æ–µ - –∑–∞–±–æ—Ç–∏—à—å—Å—è –æ —Å–µ–±–µ üìù",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–¥–µ—Ç—å –≤ —Ç–∏—à–∏–Ω–µ —Å–æ —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏. –≠—Ç–æ –∏—Å—Ü–µ–ª—è–µ—Ç ü§´",
    "–¢—ã - –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏. –ò –≤ –∫–∞–∂–¥–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –±—ã–≤–∞—é—Ç —Å–ª–æ–∂–Ω—ã–µ –≥–ª–∞–≤—ã üìñ",
    "–ü–æ–º–Ω–∏: —ç–º–æ—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã. –û–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏ —É—Ö–æ–¥—è—Ç, –∫–∞–∫ –≤–æ–ª–Ω—ã üåä",
    "–ó–∞–±–æ—Ç–∞ –æ –º–µ–Ω—Ç–∞–ª—å–Ω–æ–º –∑–¥–æ—Ä–æ–≤—å–µ - —ç—Ç–æ –º—É–∂–µ—Å—Ç–≤–æ üéóÔ∏è",
    "–¢—ã –∏–º–µ–µ—à—å –ø—Ä–∞–≤–æ –Ω–∞ –æ—Ç–¥—ã—Ö. –ú–∏—Ä –ø–æ–¥–æ–∂–¥–µ—Ç üõå",
    "–ò–Ω–æ–≥–¥–∞ —Å–∞–º–æ–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–µ - —ç—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å. –†–∞–∑—Ä–µ—à–∏ —Å–µ–±–µ —ç—Ç–æ ‚è∏Ô∏è",
    "–¢—ã –≤–∞–∂–µ–Ω. –¢–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞ –≤–∞–∂–Ω—ã. –¢–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤–∞–∂–Ω–æ üíé"
  ],
  2: [ // –î–ª—è –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (20 —Ñ—Ä–∞–∑)
    "–ù–µ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ –±—ã—Ç—å —Å–∏–ª—å–Ω—ã–º. –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å üß∏",
    "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å - —ç—Ç–æ —É–∂–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º –º–∏—Ä–µ ‚öñÔ∏è",
    "–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –≤–µ–¥—É—Ç –∫ –±–æ–ª—å—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º. –ü—Ä–æ–¥–æ–ª–∂–∞–π –¥–≤–∏–≥–∞—Ç—å—Å—è üêæ",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–∑–Ω–∞—Ç—å: —Å–µ–≥–æ–¥–Ω—è –Ω–µ –º–æ–π –¥–µ–Ω—å. –ò —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ üìâ",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –ª—É—á—à–µ–µ, —á—Ç–æ –º–æ–∂–µ—à—å –≤ –¥–∞–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö. –≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üåü",
    "–ó–∞–≤—Ç—Ä–∞ –ø—Ä–∏–Ω–µ—Å–µ—Ç –Ω–æ–≤—ã–µ —ç–Ω–µ—Ä–≥–∏–∏. –î–∞–π —Å–µ–±–µ –≤—Ä–µ–º—è üîÑ",
    "–ù–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–π —Å–≤–æ—é –≥–ª–∞–≤—É 3 —Å —á—É–∂–æ–π –≥–ª–∞–≤–æ–π 10. –£ –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π –ø—É—Ç—å üõ£Ô∏è",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç—Å—Ç—É–ø–∏—Ç—å, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ø—Ä—ã–≥–Ω—É—Ç—å –¥–∞–ª—å—à–µ ü¶ò",
    "–¢–≤–æ—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ üíé",
    "–†–∞–∑—Ä–µ—à–∏ —Å–µ–±–µ –±—ã—Ç—å –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã–º. –í –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–µ –µ—Å—Ç—å –∫—Ä–∞—Å–æ—Ç–∞ üé®",
    "–°–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ - –Ω–µ –ø—Ä–∏–≥–æ–≤–æ—Ä, –∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–¥–∞ –¥—É—à–∏ üå§Ô∏è",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—ã—Ç—å –≤ —Å–≤–æ–µ–º –∫–æ–∫–æ–Ω–µ. –ó–∞–≤—Ç—Ä–∞ —Ä–∞—Å–ø—Ä–∞–≤–∏—à—å –∫—Ä—ã–ª—å—è ü¶ã",
    "–¢—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—É—Ç–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –∫–∞–∂–µ—Ç—Å—è –∏–∑–≤–∏–ª–∏—Å—Ç—ã–º üó∫Ô∏è",
    "–û—Ç–¥—ã—Ö - —ç—Ç–æ –Ω–µ –±–µ–∑–¥–µ–ª—å–µ, –∞ –≤–∞–∂–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ üèñÔ∏è",
    "–ö–∞–∂–¥–∞—è —ç–º–æ—Ü–∏—è —É—á–∏—Ç –Ω–∞—Å —á–µ–º—É-—Ç–æ –Ω–æ–≤–æ–º—É –æ —Å–µ–±–µ üéì",
    "–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–Ω—è—Ç—å —Å–µ–±—è —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –µ—Å—Ç—å —Å–µ–π—á–∞—Å ü§ó",
    "–¢—ã —Ä–∞—Å—Ç–µ—à—å, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –∑–∞–º–µ—á–∞–µ—à—å —ç—Ç–æ–≥–æ üå±",
    "–ó–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ - —ç—Ç–æ –∞–∫—Ç –ª—é–±–≤–∏ –∫ —Å–µ–±–µ üíù",
    "–ò–Ω–æ–≥–¥–∞ —Ç–∏—à–∏–Ω–∞ –ª–µ—á–∏—Ç –ª—É—á—à–µ —Å–ª–æ–≤ ü§´",
    "–¢—ã –±–ª–∏–∂–µ –∫ –ø—Ä–æ—Ä—ã–≤—É, —á–µ–º –¥—É–º–∞–µ—à—å üîÆ"
  ],
  3: [ // –î–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (15 —Ñ—Ä–∞–∑)
    "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å - —Å—É–ø–µ—Ä—Å–∏–ª–∞ –≤ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º –º–∏—Ä–µ üõ°Ô∏è",
    "–ò–Ω–æ–≥–¥–∞ –æ–±—ã—á–Ω—ã–µ –¥–Ω–∏ - —Å–∞–º—ã–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ. –¶–µ–Ω–∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ üçÉ",
    "–ë–∞–ª–∞–Ω—Å - —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–æ. –¢—ã —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è ‚öñÔ∏è",
    "–ú–æ–º–µ–Ω—Ç—ã –ø–æ–∫–æ—è —Ç–∞–∫ –∂–µ –≤–∞–∂–Ω—ã, –∫–∞–∫ –∏ –º–æ–º–µ–Ω—Ç—ã —Å—á–∞—Å—Ç—å—è üåø",
    "–¢—ã —Å–æ–∑–¥–∞–µ—à—å –ø—Ä–æ—á–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π üèóÔ∏è",
    "–ù–æ—Ä–º–∞–ª—å–Ω–æ - —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –≥–∞—Ä–º–æ–Ω–∏–µ–π üéµ",
    "–ò–Ω–æ–≥–¥–∞ –ª—É—á—à–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è - –ø—Ä–æ—Å—Ç–æ –±—ã—Ç—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º üßò",
    "–¢—ã –≤ –ø–æ—Ç–æ–∫–µ –∂–∏–∑–Ω–∏. –î–æ–≤–µ—Ä—è–π —Ç–µ—á–µ–Ω–∏—é üåä",
    "–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ - –ø—Ä–∏–∑–Ω–∞–∫ –º—É–¥—Ä–æ—Å—Ç–∏ ‚öñÔ∏è",
    "–û–±—ã—á–Ω—ã–µ –¥–Ω–∏ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ —ç–∫—Å—Ç—Ä–∞–æ—Ä–¥–∏–Ω–∞—Ä–Ω—É—é –∂–∏–∑–Ω—å üìÖ",
    "–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è –∏–º–µ–Ω–Ω–æ —Ç–∞–º, –≥–¥–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–µ–π—á–∞—Å üéØ",
    "–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ - —ç—Ç–æ —Å—É–ø–µ—Ä—Å–∏–ª–∞ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ üïäÔ∏è",
    "–ò–Ω–æ–≥–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—Ä–∞–º—ã - —É–∂–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ üé≠",
    "–¢—ã —Å—Ç—Ä–æ–∏—à—å —Å–≤–æ—é –∂–∏–∑–Ω—å –∫–∏—Ä–ø–∏—á–∏–∫ –∑–∞ –∫–∏—Ä–ø–∏—á–∏–∫–æ–º üß±",
    "–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –º–µ—á—Ç–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é - —Ç–≤–æ–π –ø—É—Ç—å üåâ"
  ],
  4: [ // –î–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (15 —Ñ—Ä–∞–∑)
    "–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –î–µ–ª–∏—Ç–µ—Å—å –∏–º —Å –º–∏—Ä–æ–º üåç",
    "–¢—ã –∏–∑–ª—É—á–∞–µ—à—å –ø–æ–∑–∏—Ç–∏–≤–Ω—É—é —ç–Ω–µ—Ä–≥–∏—é. –ó–∞—Ä—è–∂–∞–π –¥—Ä—É–≥–∏—Ö! ‚ö°",
    "–û—Ç–ª–∏—á–Ω—ã–µ –¥–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è üì∏",
    "–¢—ã –Ω–∞ –≤–æ–ª–Ω–µ —É—Å–ø–µ—Ö–∞! –õ–æ–≤–∏ —ç—Ç–æ—Ç –ø–æ—Ç–æ–∫ üåä",
    "–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è üß≤",
    "–¢–≤–æ–µ —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ - —Å—É–ø–µ—Ä—Å–∏–ª–∞! –ò—Å–ø–æ–ª—å–∑—É–π –µ–µ ü¶∏",
    "–ú–∏—Ä –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. –ü—Ä–æ–¥–æ–ª–∂–∞–π —Å–∏—è—Ç—å! ‚ú®",
    "–¢—ã —Å–æ–∑–¥–∞–µ—à—å —Å–≤–æ—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å. –ò –æ–Ω–∞ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞! üé®",
    "–•–æ—Ä–æ—à–∏–µ –¥–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞—é—Ç, —Ä–∞–¥–∏ —á–µ–≥–æ –º—ã –∂–∏–≤–µ–º üí´",
    "–¢–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏—Ö! üé≠",
    "–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è - —Ç–≤–æ–π —Å—É–ø–µ—Ä–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º üöÄ",
    "–¢—ã –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—à—å —Ö–æ—Ä–æ—à–µ–µ –≤ —Å–≤–æ—é –∂–∏–∑–Ω—å üåü",
    "–ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è —ç—Ç–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é! üéâ",
    "–¢–≤–æ–µ —Å—á–∞—Å—Ç—å–µ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ! –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–π –µ–≥–æ üòÑ",
    "–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–µ–ª! –í–ø–µ—Ä–µ–¥! üèÜ"
  ],
  5: [ // –î–ª—è –æ—Ç–ª–∏—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (15 —Ñ—Ä–∞–∑)
    "–í–ê–£! –¢–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ! –ü–æ–∫–æ—Ä—è–π –≤–µ—Ä—à–∏–Ω—ã! üèîÔ∏è",
    "–¢—ã —Å–∏—è–µ—à—å! –ü—É—Å—Ç—å –≤–µ—Å—å –º–∏—Ä —É–≤–∏–¥–∏—Ç —Ç–≤–æ–π —Å–≤–µ—Ç üí°",
    "–≠–π—Ñ–æ—Ä–∏—è! –õ–æ–≤–∏ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –∏ —Å–æ–∑–¥–∞–≤–∞–π —á—É–¥–µ—Å–∞! üåà",
    "–¢–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ - —Å—É–ø–µ—Ä—Å–∏–ª–∞! –ü—Ä–µ–≤—Ä–∞—â–∞–π –º–µ—á—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å! ü¶∏",
    "–¢—ã –Ω–∞ –ø–∏–∫–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π! –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–π –≤—Å–ø–ª–µ—Å–∫! ‚ö°",
    "–í—Å–µ–ª–µ–Ω–Ω–∞—è —É–ª—ã–±–∞–µ—Ç—Å—è —Ç–µ–±–µ —Å–µ–≥–æ–¥–Ω—è! –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–π! üåü",
    "–¢–≤–æ–µ —Å—á–∞—Å—Ç—å–µ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç! –°—Ç–∞–Ω—å –º–∞—è–∫–æ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö! üèÆ",
    "–ò–¥–µ–∞–ª—å–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –ø—Ä–æ—Ä—ã–≤–æ–≤! –î–µ–π—Å—Ç–≤—É–π —Å–º–µ–ª–æ! üöÄ",
    "–¢—ã —Å–æ–∑–¥–∞–µ—à—å –º–∞–≥–∏—é —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏! –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤–æ–ª—à–µ–±–Ω–∏—á–∞—Ç—å! üé©",
    "–≠–Ω–µ—Ä–≥–∏—è –±—å–µ—Ç –∫–ª—é—á–æ–º! –ù–∞–ø—Ä–∞–≤–ª—è–π –µ–µ –Ω–∞ —Å–∞–º—ã–µ —Å–º–µ–ª—ã–µ —Ü–µ–ª–∏! üí•",
    "–¢–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ - –º–∞–≥–Ω–∏—Ç –¥–ª—è —á—É–¥–µ—Å! –ü—Ä–∏—Ç—è–≥–∏–≤–∞–π –∂–µ–ª–∞–µ–º–æ–µ! üß≤",
    "–ü–æ—Ç—Ä—è—Å–∞—é—â–µ! –¢—ã –∑–∞—Ä—è–∂–∞–µ—à—å –≤—Å—é –≤—Å–µ–ª–µ–Ω–Ω—É—é –ø–æ–∑–∏—Ç–∏–≤–æ–º! üåå",
    "–í–µ—Ä—à–∏–Ω–∞ –±–ª–∞–∂–µ–Ω—Å—Ç–≤–∞! –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è –∫–∞–∂–¥—ã–º –º–æ–º–µ–Ω—Ç–æ–º! üéä",
    "–¢—ã - –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ —Ä–∞–¥–æ—Å—Ç–∏! –î–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º —Å –º–∏—Ä–æ–º! üåç",
    "–§–µ–µ—Ä–∏—á–µ—Å–∫–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å —Å—Ç–∞–Ω–µ—Ç –ª–µ–≥–µ–Ω–¥–æ–π! üìú"
  ]
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Ñ—Ä–∞–∑—ã
function getRandomPhrase(moodLevel) {
  const phrases = motivationalPhrases[moodLevel];
  return phrases[Math.floor(Math.random() * phrases.length)];
}

// –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
const mainKeyboard = {
  reply_markup: {
    keyboard: [
      ['üìä –û—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', 'üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'],
      ['üí≠ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É', '‚ÑπÔ∏è –û –±–æ—Ç–µ']
    ],
    resize_keyboard: true
  }
};

// –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
const moodKeyboard = {
  reply_markup: {
    keyboard: [
      ['üò¢ 1', 'üòî 2', 'üòê 3'],
      ['üòä 4', 'üòç 5', '‚Ü©Ô∏è –ù–∞–∑–∞–¥']
    ],
    resize_keyboard: true
  }
};

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
bot.onText(/\/start/, (msg) => {
  const chatId = msg.chat.id;
  const welcomeMessage = `
üåü *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Mood Tracker!*

–Ø —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥-–ø–æ–º–æ—â–Ω–∏–∫! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.

*–ß—Ç–æ —è —É–º–µ—é:*
üìä - –û—Ç–º–µ—á–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ (—Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏)
üìà - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –Ω–µ–¥–µ–ª—é
üí≠ - –î–æ–±–∞–≤–ª—è—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é
üéØ - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å patterns –∏ –¥–∞–≤–∞—Ç—å –∏–Ω—Å–∞–π—Ç—ã

*–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:*
1. –ù–∞–∂–∏–º–∞–π "üìä –û—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ" 1-3 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å
2. –ß–∏—Ç–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. –°–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ "üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
4. –î–æ–±–∞–≤–ª—è–π –∑–∞–º–µ—Ç–∫–∏ –∫–æ–≥–¥–∞ —Ö–æ—á–µ—à—å

*–î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Ç–≤–æ–µ–º –º–µ–Ω—Ç–∞–ª—å–Ω–æ–º –∑–¥–æ—Ä–æ–≤—å–µ –≤–º–µ—Å—Ç–µ!* üí´
  `;
  
  bot.sendMessage(chatId, welcomeMessage, { 
    parse_mode: 'Markdown',
    ...mainKeyboard 
  });
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
bot.on('message', (msg) => {
  const chatId = msg.chat.id;
  const text = msg.text;

  if (!userData.has(chatId)) {
    userData.set(chatId, {
      moods: [],
      notes: []
    });
  }

  const user = userData.get(chatId);

  switch(text) {
    case 'üìä –û—Ç–º–µ—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ':
      bot.sendMessage(chatId, '*–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–π—á–∞—Å?* –í—ã–±–µ—Ä–∏ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç 1 –¥–æ 5:', {
        parse_mode: 'Markdown',
        ...moodKeyboard
      });
      break;

    case 'üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞':
      showStatistics(chatId, user);
      break;

    case 'üí≠ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É':
      bot.sendMessage(chatId, 'üí≠ *–ù–∞–ø–∏—à–∏ —Å–≤–æ—é –∑–∞–º–µ—Ç–∫—É –æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–º –¥–Ω–µ:*\n\n–ß—Ç–æ –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ —Ç–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ? –ß—Ç–æ –±—ã–ª–æ –≤–∞–∂–Ω—ã–º?', {
        parse_mode: 'Markdown'
      });
      break;

    case '‚ÑπÔ∏è –û –±–æ—Ç–µ':
      bot.sendMessage(chatId, 
        `ü§ñ *Mood Tracker Bot v2.0*

–Ø —Ç–≤–æ–π AI-–ø—Å–∏—Ö–æ–ª–æ–≥ –ø–æ–º–æ—â–Ω–∏–∫! 

*–ú–æ—è –º–∏—Å—Å–∏—è:* –ø–æ–º–æ—á—å —Ç–µbetter –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å —Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏ –∏ —É–ª—É—á—à–∞—Ç—å –º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ.

*–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:*
‚Ä¢ 70+ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑
‚Ä¢ –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
‚Ä¢ –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7

*–°–æ–∑–¥–∞–Ω–æ —Å –∑–∞–±–æ—Ç–æ–π –æ —Ç–≤–æ–µ–º –º–µ–Ω—Ç–∞–ª—å–Ω–æ–º –∑–¥–æ—Ä–æ–≤—å–µ* üíô`,
        { parse_mode: 'Markdown', ...mainKeyboard }
      );
      break;

    case '‚Ü©Ô∏è –ù–∞–∑–∞–¥':
      bot.sendMessage(chatId, '–í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?', mainKeyboard);
      break;

    default:
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (1-5)
      if (['üò¢ 1', 'üòî 2', 'üòê 3', 'üòä 4', 'üòç 5'].includes(text)) {
        const mood = parseInt(text.split(' ')[1]);
        recordMood(chatId, user, mood);
      }
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–º–µ—Ç–æ–∫
      else if (text && text.length > 1 && !text.startsWith('/')) {
        const today = new Date().toDateString();
        const todayMood = user.moods.find(m => m.date === today);
        
        if (todayMood) {
          todayMood.note = text;
          bot.sendMessage(chatId, 
            `üí´ *–ó–∞–º–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!*\n\n–ö —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–º—É –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é ${moodEmojis[todayMood.mood]} –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–º–µ—Ç–∫–∞:\n\n"${text}"`, 
            { parse_mode: 'Markdown', ...mainKeyboard }
          );
        } else {
          bot.sendMessage(chatId, 'üìù –°–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É!', mainKeyboard);
        }
      }
      break;
  }
});

// –§—É–Ω–∫—Ü–∏—è –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
function recordMood(chatId, user, mood) {
  const now = new Date();
  const today = now.toDateString();
  
  // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –∑–∞–ø–∏—Å—å –∑–∞ —Å–µ–≥–æ–¥–Ω—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
  user.moods = user.moods.filter(m => m.date !== today);
  
  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
  user.moods.push({
    date: today,
    mood: mood,
    timestamp: now,
    note: ''
  });
  
  // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 90 –¥–Ω—è–º–∏
  if (user.moods.length > 90) {
    user.moods = user.moods.slice(-90);
  }
  
  const randomPhrase = getRandomPhrase(mood);
  
  const message = `
${moodEmojis[mood]} *–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ ${mood}/5 –∑–∞–ø–∏—Å–∞–Ω–æ!*

${randomPhrase}

${mood === 5 ? '\nüéâ *–°—É–ø–µ—Ä!* –î–µ–ª–∏—Å—å —Å–≤–æ–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º —Å –¥—Ä—É–∑—å—è–º–∏! –¢—ã –∑–∞—Ä—è–∂–∞–µ—à—å –ø–æ–∑–∏—Ç–∏–≤–æ–º!' : ''}
${mood <= 2 ? '\nüíô *–ü–æ–º–Ω–∏:* —è –∑–¥–µ—Å—å –¥–ª—è —Ç–µ–±—è. –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è!' : ''}
  `;
  
  bot.sendMessage(chatId, message, { 
    parse_mode: 'Markdown',
    ...mainKeyboard 
  });
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
function showStatistics(chatId, user) {
  if (user.moods.length === 0) {
    bot.sendMessage(chatId, 'üìä *–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.*\n\n–ù–∞—á–Ω–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å —Å–µ–±—è!', {
      parse_mode: 'Markdown',
      ...mainKeyboard 
    });
    return;
  }

  // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –∑–∞–ø–∏—Å–µ–π
  const recentMoods = user.moods.slice(-7);
  const averageMood = recentMoods.reduce((sum, m) => sum + m.mood, 0) / recentMoods.length;
  
  // –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
  let chart = 'üìà *–¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é:*\n\n';
  
  recentMoods.forEach(entry => {
    const date = new Date(entry.date).toLocaleDateString('ru-RU', { 
      weekday: 'short', 
      day: 'numeric' 
    });
    const moodBar = '‚óè'.repeat(entry.mood) + '‚óã'.repeat(5 - entry.mood);
    chart += `${date}: ${moodBar} ${moodEmojis[entry.mood]} ${entry.mood}/5\n`;
    
    if (entry.note) {
      chart += `   üí≠ "${entry.note}"\n`;
    }
    chart += '\n';
  });
  
  chart += `\n*–°—Ä–µ–¥–Ω–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:* ${averageMood.toFixed(1)}/5\n`;
  
  // –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
  let insight = '';
  if (averageMood >= 4.5) {
    insight = "üéØ *–ò–Ω—Å–∞–π—Ç:* –£ —Ç–µ–±—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ–¥–µ–ª—è! –¢—ã –∏–∑–ª—É—á–∞–µ—à—å –ø–æ–∑–∏—Ç–∏–≤ –∏ —ç–Ω–µ—Ä–≥–∏—é. –ü—Ä–æ–¥–æ–ª–∂–∞–π –¥–µ–ª–∏—Ç—å—Å—è —ç—Ç–∏–º —Å –º–∏—Ä–æ–º!";
  } else if (averageMood >= 4) {
    insight = "üéØ *–ò–Ω—Å–∞–π—Ç:* –û—Ç–ª–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏! –¢—ã —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è —Å –±–∞–ª–∞–Ω—Å–æ–º –∏ –Ω–∞—Ö–æ–¥–∏—à—å —Ä–∞–¥–æ—Å—Ç—å –≤ –º–µ–ª–æ—á–∞—Ö.";
  } else if (averageMood >= 3) {
    insight = "üéØ *–ò–Ω—Å–∞–π—Ç:* –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å - —Ç–≤–æ—è —Å—É–ø–µ—Ä—Å–∏–ª–∞! –¢—ã –Ω–∞—Ö–æ–¥–∏—à—å –≥–∞—Ä–º–æ–Ω–∏—é –¥–∞–∂–µ –≤ –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã–µ –¥–Ω–∏.";
  } else if (averageMood >= 2) {
    insight = "üéØ *–ò–Ω—Å–∞–π—Ç:* –ù–µ–¥–µ–ª—è –±—ã–ª–∞ –Ω–µ–ø—Ä–æ—Å—Ç–æ–π, –Ω–æ —Ç—ã –¥–µ—Ä–∂–∏—à—å—Å—è. –ü–æ–º–Ω–∏: –∑–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ - —ç—Ç–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.";
  } else {
    insight = "üéØ *–ò–Ω—Å–∞–π—Ç:* –°–ª–æ–∂–Ω–∞—è –Ω–µ–¥–µ–ª—è. –ì–æ—Ä–¥–∏—Å—å —Å–æ–±–æ–π - —Ç—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞–µ—à—å –Ω–∞–¥ —Å–æ–±–æ–π. –≠—Ç–æ —É–∂–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!";
  }
  
  bot.sendMessage(chatId, chart + '\n' + insight, { 
    parse_mode: 'Markdown',
    ...mainKeyboard 
  });
}

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
app.get('/', (req, res) => {
  res.send('Mood Tracker Bot is running! üåü');
});

const port = process.env.PORT || 3000;
app.listen(port, () => {
  console.log(`ü§ñ Mood Tracker Bot –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É ${port}`);
});
// ... –∏ –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –¥–æ –∫–æ–Ω—Ü–∞
// === –ö–û–ù–ï–¶ –í–°–¢–ê–í–ö–ò ===

// –ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Render
app.get('/', (req, res) => {
  res.send('ü§ñ Mood Tracker Bot is running on Render!');
});

app.listen(port, () => {
  console.log(`Bot is running on port ${port}`);
});